@model User

<div class="dashboard-container">
    <div class="welcome-section">
        <div class="welcome-content">
            <div class="user-avatar-large">
                @Model.FullName.Substring(0, 1).ToUpper()
            </div>
            <div class="welcome-text">
                <h1 class="welcome-title">Hoş geldiniz,</h1>
                <h2 class="user-name">@Model.FullName</h2>
                <p class="welcome-subtitle">Size özel yönetim paneline hoş geldiniz</p>
            </div>
        </div>
        <div class="welcome-decoration">
            <div class="decoration-circle circle-1"></div>
            <div class="decoration-circle circle-2"></div>
            <div class="decoration-circle circle-3"></div>
        </div>
    </div>

    <div class="dashboard-cards">
        <div class="dashboard-card profile-card">
            <div class="card-icon">
                <i class="fas fa-user-circle"></i>
            </div>
            <div class="card-content">
                <h3 class="card-title">Profil Yönetimi</h3>
                <p class="card-description">Kişisel bilgilerinizi görüntüleyin ve güncelleyin</p>
                <div class="card-stats">
                    <div class="stat-item">
                        <i class="fas fa-envelope me-2"></i>
                        <span>@Model.Email</span>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-calendar me-2"></i>
                        <span>@Model.BirthDate.ToString("dd/MM/yyyy")</span>
                    </div>
                </div>
            </div>
            <div class="card-action">
                <a asp-controller="User" asp-action="Profile" class="btn-card btn-primary-card">
                    <i class="fas fa-arrow-right me-2"></i>
                    Profil Sayfam
                </a>
            </div>
        </div>

        <div class="dashboard-card events-card">
            <div class="card-icon">
                <i class="fas fa-calendar-check"></i>
            </div>
            <div class="card-content">
                <h3 class="card-title">Etkinlik Yönetimi</h3>
                <p class="card-description">Etkinlikleri oluşturun, düzenleyin ve yönetin</p>
                <div class="card-stats">
                    <div class="stat-item">
                        <i class="fas fa-plus-circle me-2"></i>
                        <span>Yeni etkinlik oluştur</span>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-list me-2"></i>
                        <span>Mevcut etkinlikleri yönet</span>
                    </div>
                </div>
            </div>
            <div class="card-action">
                <a asp-area="Management" asp-controller="Event" asp-action="Index" class="btn-card btn-success-card">
                    <i class="fas fa-arrow-right me-2"></i>
                    Etkinlik Yönetimi
                </a>
            </div>
        </div>
    </div>

    <div class="logout-section">
        <div class="logout-card">
            <div class="logout-content">
                <div class="logout-icon">
                    <i class="fas fa-sign-out-alt"></i>
                </div>
                <div class="logout-text">
                    <h4>Güvenli Çıkış</h4>
                    <p>Oturumunuzu güvenli bir şekilde sonlandırın</p>
                </div>
            </div>
            <form id="fakeTokenForm">@Html.AntiForgeryToken()</form>
            <button type="submit" class="btn-logout" onclick="logoutClick('@Model.FullName')">
                <i class="fas fa-power-off me-2"></i>
                Güvenli Çıkış
            </button>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        function logoutClick(itemName) {
            const confirmCard = document.createElement('div');
            confirmCard.className = 'confirm-card';
            confirmCard.innerHTML = `
                <p class="confirm-card-header">
                    <i class="fas fa-exclamation-triangle"></i>
                    Çıkış Yap
                </p>
                <p class="confirm-card-content">
                    ${itemName} hesabından çıkış yapmak üzeresin! İşleme devam etmek istiyor musunuz?
                </p>
                <div class="confirm-card-buttonContainer">
                    <button class="acceptButton">Evet</button>
                    <button class="declineButton">İptal</button>
                </div>
            `;
            document.body.appendChild(confirmCard);

            const acceptBtn = confirmCard.querySelector('.acceptButton');
            const declineBtn = confirmCard.querySelector('.declineButton');

            acceptBtn.addEventListener('click', () => logout());
            declineBtn.addEventListener('click', () => 
            {
                confirmCard.remove(); 
                window.location.href = '@Url.Action("Index", "Home", new { area = "Management" })';
            });
        }

        function logout() {
            console.log('Çıkış yapılıyor...');
            const form = document.createElement('form');
            form.method = 'post';
            form.action = '@Url.Action("Logout", "User", new { area = "Management" })';

            const token = document.querySelector('input[name="__RequestVerificationToken"]');
            if (token) {
                const input = document.createElement('input');
                input.type = 'hidden';
                input.name = '__RequestVerificationToken';
                input.value = token.value;
                form.appendChild(input);
            }

            document.body.appendChild(form);
            form.submit();
        }
    </script>
}